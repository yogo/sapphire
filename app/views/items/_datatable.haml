:javascript
  function load_modal(url){
    $("body").modalmanager("loading");setTimeout(function(){
      $("#ajax-modal").load(url, "", function(){
        $("#ajax-modal").modal();
      });
    }, 1000);
  }
  function load_widemodal(url){
    $("body").modalmanager("loading");setTimeout(function(){
      $("#ajax-modal-fw").load(url, "", function(){
        $("#ajax-modal-fw").modal();
      });
    }, 1000);
  }

:javascript
  $(document).ready(function() {
    var data_table = $('#ajax-item-table').dataTable({
       bProcessing: true,
       sAjaxSource: "#{project_collection_items_url(project, collection, :format=>"json")}",
       "sScrollY": "300px",
   		 "sDom": "frtiS",
   		"bDeferRender": true,
   		"aoColumnDefs":[{
   		  "mRender": function(data, type, row){
          var base_url ="#{project_collection_path(project,collection)}/items/"+data.toString();

          return '<a id="show_'+data.toString()+'" class="icon-time item-show" data-toggle="modal" href="#" onclick="load_widemodal(\''+base_url + '\')"></a><a id="edit_'+data.toString()+'" class="icon-edit item-edit" data-toggle="modal" href="#" onclick="load_modal(\''+base_url + '/edit\')"></a><a class="icon-remove-circle" href="'+base_url+'" data-method="delete" data-confirm="Are you sure you wish to delete this Item?" rel="nofollow"></a>';
          
   		   },
   		  "aTargets":[0]
       }/*,
       #{
         '{
           "mRender": function(data, type, row){
               if (data ){
                 if (data.toString().indexOf("{") != -1){
               var json_string="";
               json_string = JSON.parse(data);
               if (json_string != null  && json_string[\'project\'] != null && json_string[\'collection\'] != null && json_string[\'item\'] != null){
               var url ="/projects/"+json_string[\'project\'][\'id\']+"/collections/"+json_string[\'collection\'][\'id\']+"/items/"+json_string[\'item\'][\'id\'];
               return \'<a id="show_\'+data.toString()+\'" class="icon-edit item-show" data-toggle="modal" href="#" onclick="load_modal(\\\'\'+url + \'/edit\\\')"></a><a id="show_\'+data.toString()+\'" class="item-show" data-toggle="modal" href="#" onclick="load_widemodal(\\\'\'+url +\'\\\')">\' + json_string[\'item\'][\'display\']+\'</a>\';
                
              }
            }
              else{
                return "";
              }
            }
    		   },
    		  "aTargets":['+ collection.schema.map {|s| s.is_file? || s.associated_schema_id ? s.position : nil}.compact.join(',')+']
          }'
        }*/
     ]}
    );
    $('#ajax-item-table').dataTable().columnFilter({
      aoColumns: [null, #{@collection.schema.map{|s| '{type: "text"}'}.join(',')}],
      bUseColVis: true
      });
  } );
  
  
  $(document).ready(function() {
       $.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback, bStandingRedraw )
       {
           if ( sNewSource !== undefined && sNewSource !== null ) {
               oSettings.sAjaxSource = sNewSource;
           }

           // Server-side processing should just call fnDraw
           if ( oSettings.oFeatures.bServerSide ) {
               this.fnDraw();
               return;
           }

           this.oApi._fnProcessingDisplay( oSettings, true );
           var that = this;
           var iStart = oSettings._iDisplayStart;
           var aData = [];

           this.oApi._fnServerParams( oSettings, aData );

           oSettings.fnServerData.call( oSettings.oInstance, oSettings.sAjaxSource, aData, function(json) {
               /* Clear the old information from the table */
               that.oApi._fnClearTable( oSettings );

               /* Got the data - add it to the table */
               var aData =  (oSettings.sAjaxDataProp !== "") ?
                   that.oApi._fnGetObjectDataFn( oSettings.sAjaxDataProp )( json ) : json;

               for ( var i=0 ; i<aData.length ; i++ )
               {
                   that.oApi._fnAddData( oSettings, aData[i] );
               }

               oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();

               that.fnDraw();

               if ( bStandingRedraw === true )
               {
                   oSettings._iDisplayStart = iStart;
                   that.oApi._fnCalculateEnd( oSettings );
                   that.fnDraw( false );
               }

               that.oApi._fnProcessingDisplay( oSettings, false );

               /* Callback user function - for event handlers etc */
               if ( typeof fnCallback == 'function' && fnCallback !== null )
               {
                   fnCallback( oSettings );
               }
           }, oSettings );
       };
    });


%table.data-table.table.table-condensed.table-striped{:id=>'ajax-item-table'}
  %thead
    %tr
      %th.action-column
        -unless collection.category == "Files"
          %a.btn.btn-mini.schema-new(href='#' data-toggle='modal' title='Add Column') 
            %i.icon-plus
        %a.btn.btn-mini(href='#edit-filters' data-toggle='modal' title='Filter Data Grid') 
          %i.icon-filter
      - collection.schema.each do |s|
        %th.column
          %a.icon-edit(href='' data-toggle='modal' class='#{s.id.to_s}')
          = s.name
          :javascript
            //Schemas#edit (Edit Column Icon Link)
            #{ajax_modal_js("th a.#{s.id.to_s}", edit_project_collection_schema_path(project,collection,s))}
      -if collection.category == "Files"
        %th File
  %tbody
  %tfoot
    %tr
      %th.action-column
      - collection.schema.each do |s|
        %th.column
          = s.name